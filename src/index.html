<!DOCTYPE html>

<html>

<body>
    <div>
        <canvas id="myChart"></canvas>
    </div>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.bundle.min.js"></script>
<script src="./bundle.js"></script>
<script>

    var calculator = new BondRepaymentVisualizer.Calculator();

    const amount = 450000;
    const interest = 11.25 / 100;
    const periodInMonths = 20 * 12;

    

    const dataRemainingBalance1 = calculator.calculateDataSeriesForRemainingBalance(amount, interest, periodInMonths, []);
    const dataTotalPaymentAmount1 = calculator.calculateDataSeriesForTotalMonthlyPayment(amount, interest, periodInMonths, []);
    const dataPaymentAmount1 = calculator.calculateDataSeriesForPaymentAmount(amount, interest, periodInMonths, []);

    const additionalPayments = dataRemainingBalance1.map((x, i) => i <= 24? 5000 : 0);

    const dataRemainingBalance2 = calculator.calculateDataSeriesForRemainingBalance(amount, interest, periodInMonths, additionalPayments);
    const dataTotalPaymentAmount2 = calculator.calculateDataSeriesForTotalMonthlyPayment(amount, interest, periodInMonths, additionalPayments);
    const dataPaymentAmount2 = calculator.calculateDataSeriesForPaymentAmount(amount, interest, periodInMonths, additionalPayments);

    var ctx = document.getElementById("myChart").getContext('2d');
    var myLineChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: dataRemainingBalance1.map((x, i) => i),
            colors: ['red', 'blue'],
            datasets: [
                {
                    borderColor: '#ff0000',
                    label: 'Remaining Balance',
                    data: dataRemainingBalance1,
                },
                {
                    borderColor: '#0000ff',
                    label: 'Total Payment Amount',
                    data: dataTotalPaymentAmount1,
                },
                {
                    borderColor: '#00ff00',
                    label: 'Payment Amount',
                    data: dataPaymentAmount1,
                },
                {
                    borderColor: '#ff6666',
                    label: 'Remaining Balance (Additional)',
                    data: dataRemainingBalance2,
                },
                {
                    borderColor: '#6666ff',
                    label: 'Total Payment Amount (Additional)',
                    data: dataTotalPaymentAmount2,
                },
                {
                    borderColor: '#66ff66',
                    label: 'Payment Amount (Additional)',
                    data: dataPaymentAmount2,
                }]
        },
        options: {
            responsive: true,
            scales: {
                xAxes: [{
                    ticks: {
                        autoSkip: true,
                        maxTicksLimit: 30,
                    }
                }]
            },
            elements: {
                point: {
                    radius: 1.2
                }
            }
        }
    });
</script>

</html>